<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE HTML>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" template="/template/template.xhtml">
	<ui:define name="content">


		<h:head>
			<link type="text/css" rel="stylesheet" href="../css/default.css" />
		</h:head>

		<h:body>
		
		<p:fieldset legend="Departamento" rendered="#{!cadastroDepartamentoBean.permissao}">
			<p>Você não tem permissão para acessar esta página, entre em contato com o Administrador</p>					
		</p:fieldset>
		
			<div class="entry" style="line-height: 200%">
				<h:form id="form" rendered="#{cadastroDepartamentoBean.permissao}">
					<p:growl id="growl" />
					<p:panel id="basic" header="Cadastro de Departamento"
						style="margin-bottom:20px">
						
						<p:panelGrid columns="2">
							
							<p:outputLabel for="nome" value="Nome do Departamento:" />
							<p:inputText id="nome" value="#{cadastroDepartamentoBean.departamento.nome}" />

							<p:outputLabel for="localizacao" value="Localização do Departamento:" />
							<p:inputText id="localizacao"
								value="#{cadastroDepartamentoBean.departamento.localizacao}" />

						</p:panelGrid>
						<p:commandButton value="Cadastrar" icon="ui-icon-star"
								action="#{cadastroDepartamentoBean.salvar()}"
								update="@form">
							</p:commandButton>
							<p:commandButton value="Cancelar"
									action="#{cadastroDepartamentoBean.cancela}">
									<p:confirm header="Confirmação"
									message="Tem certeza que deseja cancelar a alteração ? Todos os dados digitados serão perdidos."
									icon="ui-icon-alert" />
									<p:confirmDialog global="true" showEffect="fade" hideEffect="fade"
									icon="ui-icon-cancel">
		
									<p:commandButton value="Sim" type="button"
									styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
									<p:commandButton value="Não" type="button"
									styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
								</p:confirmDialog>
							</p:commandButton>
						<br />
						<br />
						
						<p:dataTable id="departamentosTable"
							value="#{cadastroDepartamentoBean.listaDepartamentos}" var="dep">

							<p:column headerText="Nome" width="5.0%">
								<h:outputText value="#{dep.nome}" />
							</p:column>

							<p:column headerText="Localização" width="5.0%">
								<h:outputText value="#{dep.localizacao}" />
							</p:column>

							<p:column headerText="Editar" width="1.0%">
									<p:commandButton icon="ui-icon-pencil"
									action="alteraDepartamento.xhtml" styleClass="botoesIcones"
									style="center">
									<f:param name="DepartamentoId" value="#{dep.id}" />
									 </p:commandButton> 
							</p:column>

							<p:column headerText="Excluir" width="1.0%">
								<p:commandButton icon="ui-icon-trash"
									action="#{cadastroDepartamentoBean.remove()}" styleClass="botoesIcones"
									style="center">
									<f:param name="DepartamentoId" value="#{dep.id}" />
								</p:commandButton>
							</p:column>

						</p:dataTable>

					</p:panel>
				</h:form>
			</div>
		</h:body>
	</ui:define>
</ui:composition>