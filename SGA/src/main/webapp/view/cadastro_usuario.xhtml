<!DOCTYPE HTML>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" 
	template="/template/template.xhtml">
	
	<ui:define name="content">

		<h:head>
			
			<link type="text/css" rel="stylesheet" href="../css/default.css" />
			
		</h:head>
		
		<h:body>
			<p:fieldset legend="Usuário" rendered="#{!cadastroUsuarioBean.permissao}">
			<p>Você não tem permissão para acessar esta página, entre em contato com o Administrador</p>					
		</p:fieldset>
		
			<div class="entry" style="line-height: 200%">
				<h:form id="form" rendered="#{cadastroUsuarioBean.permissao}">
				<p:growl id="growl" />
			
					<p:panel id="basic" header="Cadastro de Usuário" style="margin-bottom:20px">
						<p:panelGrid columns="2">
							<p:outputLabel for="login" value="Login:" />
							<p:inputText id="login" value="#{cadastroUsuarioBean.usuario.login}" />

							<p:outputLabel for="senha" value="Senha:" />
							<p:inputText id="senha"  type="password" value="#{cadastroUsuarioBean.usuario.senha}" />

							<p:outputLabel for="nome" value="Nome:" />
							<p:inputText id="nome" value="#{cadastroUsuarioBean.usuario.nome}" />

							<p:outputLabel for="email" value="Email:" />
							<p:inputText id="email" value="#{cadastroUsuarioBean.usuario.email}" />
							
							
							
					    
						</p:panelGrid>
						<br/>
						<p:panel header="Selecione uma célula" toggleable="true"
					style="width:30%;" collapsed="true">

    						<p:selectManyCheckbox id="celula" value="#{cadastroUsuarioBean.celulasSelecionadas}" converter="oneMenuConverter">
						        <f:selectItems var = "cel" itemValue="#{cel}" value = "#{cadastroCelulaBean.listaCelula}" itemLabel="#{cel.nome}"/>
					    	</p:selectManyCheckbox>
					    	</p:panel>
					    <br/>
					    
						<p:commandButton value="Cadastrar" icon="ui-icon-star"
								action="#{cadastroUsuarioBean.salvar()}" update="@form">
							</p:commandButton>
							<p:commandButton value="Cancelar"
									action="#{cadastroUsuarioBean.cancela}">
									<p:confirm header="Confirmação"
									message="Tem certeza que deseja cancelar a alteração ? Todos os dados digitados serão perdidos."
									icon="ui-icon-alert" />
									<p:confirmDialog global="true" showEffect="fade" hideEffect="fade"
									icon="ui-icon-cancel">
		
									<p:commandButton value="Sim" type="button"
									styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
									<p:commandButton value="Não" type="button"
									styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
								</p:confirmDialog>
							</p:commandButton>
						<br/>
						<br/>
						<br/>
						<p:dataTable id="usuarioTable"
							value="#{cadastroUsuarioBean.listaUsuario}" var="user">
							
							<p:column headerText="Login" width="5.0%">
								<h:outputText value="#{user.login}" />
							</p:column>

							<p:column headerText="Nome" width="5.0%">
								<h:outputText value="#{user.nome}" />
							</p:column>
							
							<p:column headerText="Email" width="5.0%">
								<h:outputText value="#{user.email}" />
							</p:column>
							
							<p:column headerText="Editar" width="1.0%">
									<p:commandButton icon="ui-icon-pencil"
									action="alteraUsuario.xhtml" styleClass="botoesIcones"
									style="center">
									<f:param name="UsuarioID" value="#{user.id}" />
									 </p:commandButton> 
							</p:column>

							<p:column headerText="Excluir" width="1.0%">
								<p:commandButton icon="ui-icon-trash"
									action="removeUsuario.xhtml" styleClass="botoesIcones"
									style="center">
									<f:param name="UsuarioID" value="#{user.id}" />
								</p:commandButton>
							</p:column>
						</p:dataTable>
					</p:panel>
				</h:form>
			</div>
		</h:body>
	</ui:define>
</ui:composition>